trigger:
  - none

pool:
  vmImage: 'ubuntu-latest'

variables:
  group: DeploymentVariables

jobs:
  - job: CreateResourceGroup
    displayName: 'Create Resource Group and Resources'
    steps:
    - task: AzureResourceManagerTemplateDeployment@3
      displayName: 'Create or update resource group'
      inputs:
        azureResourceManagerConnection: 'VSProSubscription'
        subscriptionId: '$(deploymentSubscription)'
        action: 'Create Or Update Resource Group'
        resourceGroupName: 'mercury-iot'
        location: 'Central US'
        templateLocation: 'URL of the file'
        csmFileLink: 'https://raw.githubusercontent.com/mhenderson442/mercury-iot/master/templates/mercury-iot-template.json'
        csmParametersFileLink: 'https://raw.githubusercontent.com/mhenderson442/mercury-iot/master/templates/mercury-iot-template.parameters.json'
        deploymentMode: 'Incremental'        
